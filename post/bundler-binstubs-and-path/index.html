<!doctype html><html lang=en><head><meta charset=utf-8><title>TIL bundler binstubs with direnv - chischaschos rocks</title><meta name=description content="TIL bundler binstubs with direnv"><meta name=author content="emmanuel delgado"><meta name=viewport content="width=device-width,initial-scale=1"><link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel=stylesheet type=text/css><link rel=stylesheet href=//chischaschos.github.io/css/fonts.css><link rel=stylesheet href=https://unpkg.com/purecss@0.6.1/build/pure-min.css integrity=sha384-CCTZv2q9I9m3UOxRLaJneXrrqKwUNOzZ6NGEUMwHtShDJ+nCoiXJCAgi05KfkLGY crossorigin=anonymous><link rel=stylesheet href=https://unpkg.com/purecss@0.6.1/build/grids-responsive-min.css><link rel=stylesheet href=//chischaschos.github.io/css/custom.css><link rel=stylesheet href=//chischaschos.github.io/highlight/styles/solarized_light.css><script src=//chischaschos.github.io/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><meta name=generator content="Hugo 0.64.0"></head><body><div class="header pure-g"><div class="pure-u-1-24 pure-u-md-5-24"></div><div class="pure-u-11-12 pure-u-md-5-8"><div class="desktop pure-menu pure-menu-horizontal nav-menu"><a href=//chischaschos.github.io/ class="site-title pure-menu-heading">chischaschos rocks</a><ul class=pure-menu-list><li class=pure-menu-item><a href=//chischaschos.github.io/about/ class=pure-menu-link>About</a></li></ul></div><div class="mobile pure-menu nav-menu"><a href=/ class=pure-menu-heading id=toggle-home>chischaschos rocks</a>
<a href=# id=toggle-btn>&#9776;</a><ul class=pure-menu-list id=toggle-content style=display:none><li class=pure-menu-item><a href=//chischaschos.github.io/about class=pure-menu-link>About</a></li></ul></div></div><div class="pure-u-1-24 pure-u-md-1-6"></div></div><div class=pure-g><div class="pure-u-1-24 pure-u-md-5-24"></div><div class="pure-u-11-12 pure-u-md-5-8"><div class=post><div class=post-title><p class=footnote><time>2018-12-05</time>
|
tags:<a href=//chischaschos.github.io/tags/til>til</a></p><h1>TIL bundler binstubs with direnv</h1></div><div class=post-content><h2 id=motivation>Motivation</h2><p>I have this ruby project where I&rsquo;m enforcing <a href=https://github.com/rubocop-hq/rubocop>RuboCop</a> and the way I do this is twofold:</p><ol><li>by using a pre-commit hook that runs RuboCop altogether.</li><li>and with <a href=https://github.com/neomake/neomake>neomake</a> so I can see errors/warnings right on my editor.</li></ol><p>Today I noticed that the reported errors/warnings in my editor and the command line are not the same. What happened here?</p><h2 id=is-it-neomake-issue>Is it neomake issue?</h2><p>I noticed that I had different versions of rubocop installed, because of reasons different projects have different versions of RuboCop.</p><p>But shouldn&rsquo;t neomake use bundler exec?. Well maybe <a href=https://github.com/neomake/neomake/issues/2078,>https://github.com/neomake/neomake/issues/2078,</a> but there is a less obtrusive way.</p><h2 id=direnvhttpsdirenvnet-and-bundler-binstubs><a href=https://direnv.net/>direnv</a> and bundler binstubs</h2><p>I have already installed <a href=https://direnv.net/>direnv</a>, so what I did is:</p><ol><li><p>Generate the <a href=https://bundler.io/man/bundle-binstubs.1.html>rubocop binstub</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bundler binstubs rubocop
</code></pre></div></li><li><p>Add the current path&rsquo;s <code>bin</code> to the <code>PATH</code> env variable via my <code>.envrc</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>export PATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>/bin:$PATH<span style=color:#e6db74>`</span>
</code></pre></div></li></ol><h2 id=conclusion>Conclusion</h2><p>This fixed the problem. Now both my vim and command line are using the same version of RuboCop.</p><div id=disqus_thread></div><script>(function(){var d=document,s=d.createElement('script');s.src='//chischaschos-rocks.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></div></div><div class="pure-u-1-24 pure-u-md-1-6"></div></div><div class="footer pure-g"><div class="pure-u-1-24 pure-u-md-5-24"></div><div class="pure-u-11-12 pure-u-md-5-8"><div class=footer-content><div class="pure-menu pure-menu-horizontal"><ul><li class=pure-menu-heading id=foot-name>emmanuel delgado:</li><li class=pure-menu-item><a href=https://github.com/chischaschos class=pure-menu-link>GitHub</a></li><li class=pure-menu-item><a href=https://www.linkedin.com/in/emmanueldelgado class=pure-menu-link>LinkedIn</a></li><li class=pure-menu-item><a href=https://twitter.com/chischaschos class=pure-menu-link>Twitter</a></li></ul><a href=# class="pure-menu-heading pull-right" id=gototop-btn>↑↑</a></div></div></div><div class="pure-u-1-24 pure-u-md-1-6"></div></div><script src=//chischaschos.github.io/js/jquery.min.js type=text/javascript></script><script src=//chischaschos.github.io/js/jquery.timeago.js type=text/javascript></script><script type=text/javascript>$(function(){$("time.timeago").timeago();})
$("#toggle-btn").click(function(){$("#toggle-content").toggle();if($(this).html()==="☰"){$(this).html("X")}else{$(this).html("☰")}});$(window).resize(function(){if(window.innerWidth>768){$(".desktop").removeAttr("style");}});</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-21486770-1','auto');ga('send','pageview');</script></body></html>